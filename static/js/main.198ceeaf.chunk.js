(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports=n(36)},25:function(e,t,n){},27:function(e,t,n){},32:function(e){e.exports=["hapi-notes"]},34:function(e,t,n){var a={"./hapi-notes.md":35};function i(e){var t=o(e);return n(t)}function o(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}i.keys=function(){return Object.keys(a)},i.resolve=o,e.exports=i,i.id=34},35:function(e,t,n){e.exports=n.p+"static/media/hapi-notes.6faf0b49.md"},36:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(17),r=n.n(o),l=n(38),c=(n(25),n(2)),s=n(3),u=n(6),h=n(5),d=n(7),m=(n(27),"http://localhost:8100"),f=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,null,[{key:"getOne",value:function(e){return fetch("".concat(m,"/notes/").concat(e)).then(function(e){return e.json()})}},{key:"create",value:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("".concat(m,"/notes"),t).then(function(e){return e.json()}).catch(console.log)}},{key:"update",value:function(e){var t={method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return console.log("Note in update:",e),fetch("".concat(m,"/notes/").concat(e.title),t).then(function(e){return e.json()})}},{key:"reload",value:function(e){return fetch("".concat(m,"/reload"),{method:"PUT"}).then(function(e){return e.text()})}}]),e}(),p=n(11),g=n(41),v=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).handleChange=function(t){e.setState(Object(p.a)({},t.target.name,t.target.value))},e.sleep=function(e){return new Promise(function(t){return setTimeout(t,e)})},e.handleSubmit=function(t){t.preventDefault(),f.create(e.state).then(function(t){t.msg?alert(t.msg):e.sleep(100).then(function(){e.setState({redirectNewFile:!0})})})},e.componentDidUpdate=function(){e.state.redirectNewFile&&e.setState({redirectNewFile:!1})},e.initState={title:"",redirectNewFile:!1},e.state=e.initState,e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.state.redirectNewFile?i.a.createElement(g.a,{to:"/notes/".concat(this.state.title)}):i.a.createElement("div",{id:"new-file-modal"},i.a.createElement("h1",null,"I am the new file modal"),i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("label",null,"File Name"),i.a.createElement("input",{type:"text",name:"title",onChange:this.handleChange}),i.a.createElement("p",null,"Warning: creating a new file will destroy any unsaved changes. Be sure to save your current file"),i.a.createElement("button",{onClick:this.props.toggleNewFileModal},"Cancel"),i.a.createElement("button",null,"Create")))}}]),t}(i.a.Component),b=n(37),w=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).toggleNewFileModal=function(){console.log("hello"),e.setState(function(e){return{isNewFileModalVisibile:!e.isNewFileModalVisibile}})},e.state={files:[],isNewFileModalVisibile:!1},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){var e=n(32);this.setState({files:e})}},{key:"reload",value:function(){f.reload()}},{key:"isEditMode",value:function(){return this.props.viewInfo.editing&&this.props.viewInfo.local}},{key:"render",value:function(){return i.a.createElement("div",{id:"notes-dir"},i.a.createElement("h1",null,"Files"),this.isEditMode()?i.a.createElement("button",{onClick:this.toggleNewFileModal},"New File"):"",this.state.isNewFileModalVisibile?i.a.createElement(v,{toggleNewFileModal:this.toggleNewFileModal}):"",this.state.files.map(function(e,t){return i.a.createElement(b.a,{to:"/notes/".concat(e),key:t},e)}),this.isEditMode()?i.a.createElement("button",{onClick:this.reload},"Reload"):"")}}]),t}(i.a.Component),E=n(40),O=n(39),j=n(18),y=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("form",{onChange:this.props.handleChange,onSubmit:this.props.handleSubmit},i.a.createElement("label",{htmlFor:"title"},"title"),i.a.createElement("input",{id:"title",name:"title",type:"text",value:this.props.newNote.title}),i.a.createElement("label",{htmlFor:"text"},"text"),i.a.createElement("textarea",{id:"text",name:"text",value:this.props.newNote.text}),i.a.createElement("button",null,"Save"))}}]),t}(i.a.Component),k=n(13),N=n.n(k),S=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).state={markdown:""},e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"renderWelcome",value:function(){return"# hello there \n ## start adding markdown to get started"}},{key:"render",value:function(){var e=this.props.note,t=e.title,n=e.text||this.renderWelcome(),a=N()(n);return i.a.createElement("div",{id:"md-preview"},i.a.createElement("h1",null,"Preview of: ",t),i.a.createElement("div",{dangerouslySetInnerHTML:{__html:a}}))}}]),t}(i.a.Component),C=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"mode-bar"},i.a.createElement("h1",null,"Currently in ",this.props.viewInfo.editing?"Editing":"Viewing"," mode"),i.a.createElement("button",{onClick:this.props.toggleEdit},"Toggle"))}}]),t}(i.a.Component),F=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).initState={sections:[]},e.state=e.initState,e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"loadContents",value:function(){if(this.props.text){var e=N()(this.props.text).match(/<h1.+>.+</g).map(function(e){var t=e.match(/<h1 id="(.+)">(.+)</);return{link:t[1],text:t[2]}});this.setState({sections:e})}}},{key:"componentDidMount",value:function(){this.loadContents()}},{key:"componentDidUpdate",value:function(e){e.text!==this.props.text&&this.loadContents()}},{key:"render",value:function(){return i.a.createElement("div",{id:"table-of-contents"},i.a.createElement("p",null,"Table of contents"),this.state.sections.map(function(e){return i.a.createElement("a",{href:"#".concat(e.link)},e.text)}))}}]),t}(i.a.Component),x=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).handleChange=function(t){e.setState(Object(p.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),console.log("update it"),f.update(Object(j.a)({},e.state,{oldTitle:e.props.match.params.fileName})).then(function(){e.props.match.params.fileName||e.setState({redirectNewFile:!0})})},e.initState={title:"",text:"",redirectNewFile:!1,redirectMissingFile:!1},e.state=e.initState,e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"loadFile",value:function(e){var t=this,a=n(34)("./"+e+".md");fetch(a).then(function(e){return e.text()}).then(function(n){t.setState(function(t){return{title:e,text:n}})})}},{key:"componentDidMount",value:function(){console.log("mount");try{this.props.match.params.fileName&&this.loadFile(this.props.match.params.fileName)}catch(e){console.log("couldnt find the file"),this.setState({redirectMissingFile:!0})}}},{key:"componentDidUpdate",value:function(e,t,n){this.props.match.params.fileName!==e.match.params.fileName&&(this.props.match.params.fileName?this.loadFile(this.props.match.params.fileName):this.setState(this.initState)),this.state.redirectMissingFile&&this.setState(this.initState)}},{key:"render",value:function(){return this.state.redirectNewFile?(console.log("redirected new file"),i.a.createElement(g.a,{to:"/notes/".concat(this.state.title)})):this.state.redirectMissingFile?(console.log("redirected missing file"),i.a.createElement(g.a,{to:"/"})):i.a.createElement("div",{className:"note"},this.props.viewInfo.editing?i.a.createElement(y,{handleChange:this.handleChange,handleSubmit:this.handleSubmit,newNote:this.state,viewInfo:this.props.viewInfo,toggleEdit:this.props.toggleEdit}):"",i.a.createElement(S,{note:this.state,viewInfo:this.props.viewInfo}),this.props.viewInfo.editing?"":i.a.createElement(F,{text:this.state.text}),this.props.viewInfo.local?i.a.createElement(C,{viewInfo:this.props.viewInfo,toggleEdit:this.props.toggleEdit}):"")}}]),t}(i.a.Component),M=function(e){var t=e.viewInfo,n=e.toggleEdit;return i.a.createElement(E.a,null,i.a.createElement(O.a,{exact:!0,path:"/",render:function(e){return i.a.createElement(x,Object.assign({},e,{viewInfo:t,toggleEdit:n}))}}),i.a.createElement(O.a,{exact:!0,path:"/notes/:fileName",render:function(e){return i.a.createElement(x,Object.assign({},e,{viewInfo:t,toggleEdit:n}))}}),i.a.createElement(O.a,{exact:!0,path:"*",render:function(e){return i.a.createElement(x,Object.assign({},e,{viewInfo:t,toggleEdit:n}))}}))},I=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(u.a)(this,Object(h.a)(t).call(this))).toggleEdit=function(){e.setState(function(e){return{editing:!e.editing}})},e.initState={editing:!1,local:!1},e.state=e.initState,e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.location.href.match("//localhost:")&&(console.log("hello",window.location.href),this.setState({local:!0,editing:!0}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(w,{viewInfo:this.state}),i.a.createElement(M,{viewInfo:this.state,toggleEdit:this.toggleEdit}))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(l.a,null,i.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,2,1]]]);
//# sourceMappingURL=main.198ceeaf.chunk.js.map